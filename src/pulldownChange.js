/* *
 * pulldownChange.js
 * selector 連動
 * $('.userdata').pulldownChange('city','town','zip',twData,true);
 * from,to,zip is value's id
 * format : true / false
 * */
 $.fn.pulldownChange = function (from, to, zip, data, format) {
	set_pulldownChangeValue = $("#" + from).eq(0).val();
	if(!0==format){
		$("#" + from ).empty();
		var def = window.document.getElementById(from),x=1;
		def.options[0] = new Option("請選擇", "");
		for(var i in data){ def.options[x] = new Option(i,i); x++; }
		def.selectedIndex = 0;
	}
	$("#" + from).on("change", function () {
		value = $(this).val();
		set_pulldownChangeValue = $(this).val();
		$("#" + to).children().remove();
		changePulldown = data[value];
		changeSellectNode = window.document.getElementById(to);
		if(value!=""){
			changeSellectNode.options[0] = new Option("請選擇", "");
			for (var a = 1; a <= changePulldown.length; a++){ changeSellectNode.options[a] = new Option(changePulldown[a-1][0].town, changePulldown[a-1][0].town); }
			changeSellectNode.selectedIndex = 0;
			0 != $('#'+zip).length && (changeZipNode = window.document.getElementById(zip), changeZipNode.value = changePulldown[0][0].zip)
		}else{
			changeSellectNode.options[0] = new Option("請選擇", "");
			0 != $('#'+zip).length && ( changeZipNode = window.document.getElementById(zip), changeZipNode.value = "" )
		}
	});
	$("#" + to).on("change", function () {
		value = $(this).val();
		changePulldown = data[set_pulldownChangeValue];
		0 != $('#'+zip).length && (_townData = getObjects(changePulldown, "town", value), changeZipNode = window.document.getElementById(zip), changeZipNode.value = ("" != _townData) ? _townData[0].zip : "")
	})
};

function getObjects(b, c, d) {
	var e = [], a;
	for (a in b) b.hasOwnProperty(a) && ("object" == typeof b[a] ? e = e.concat(getObjects(b[a], c, d)) : a == c && b[c] == d && e.push(b));
	return e
};
var twData={"基隆市":[[{"zip":"200","town":"仁愛區"}],[{"zip":"201","town":"信義區"}],[{"zip":"202","town":"中正區"}],[{"zip":"203","town":"中山區"}],[{"zip":"204","town":"安樂區"}],[{"zip":"205","town":"暖暖區"}],[{"zip":"206","town":"七堵區"}]],"台北市":[[{"zip":"100","town":"中正區"}],[{"zip":"103","town":"大同區"}],[{"zip":"104","town":"中山區"}],[{"zip":"105","town":"松山區"}],[{"zip":"106","town":"大安區"}],[{"zip":"108","town":"萬華區"}],[{"zip":"110","town":"信義區"}],[{"zip":"111","town":"士林區"}],[{"zip":"112","town":"北投區"}],[{"zip":"114","town":"內湖區"}],[{"zip":"115","town":"南港區"}],[{"zip":"116","town":"文山區"}]],"新北市":[[{"zip":"207","town":"萬里區"}],[{"zip":"208","town":"金山區"}],[{"zip":"220","town":"板橋區"}],[{"zip":"221","town":"汐止區"}],[{"zip":"222","town":"深坑區"}],[{"zip":"223","town":"石碇區"}],[{"zip":"224","town":"瑞芳區"}],[{"zip":"226","town":"平溪區"}],[{"zip":"227","town":"雙溪區"}],[{"zip":"228","town":"貢寮區"}],[{"zip":"231","town":"新店區"}],[{"zip":"232","town":"坪林區"}],[{"zip":"233","town":"烏來區"}],[{"zip":"234","town":"永和區"}],[{"zip":"235","town":"中和區"}],[{"zip":"236","town":"土城區"}],[{"zip":"237","town":"三峽區"}],[{"zip":"238","town":"樹林區"}],[{"zip":"239","town":"鶯歌區"}],[{"zip":"241","town":"三重區"}],[{"zip":"242","town":"新莊區"}],[{"zip":"243","town":"泰山區"}],[{"zip":"244","town":"林口區"}],[{"zip":"247","town":"蘆洲區"}],[{"zip":"248","town":"五股區"}],[{"zip":"249","town":"八里區"}],[{"zip":"251","town":"淡水區"}],[{"zip":"252","town":"三芝區"}],[{"zip":"253","town":"石門區"}]],"桃園縣":[[{"zip":"320","town":"中壢市"}],[{"zip":"324","town":"平鎮市"}],[{"zip":"325","town":"龍潭鄉"}],[{"zip":"326","town":"楊梅鎮"}],[{"zip":"327","town":"新屋鄉"}],[{"zip":"328","town":"觀音鄉"}],[{"zip":"330","town":"桃園市"}],[{"zip":"333","town":"龜山鄉"}],[{"zip":"334","town":"八德市"}],[{"zip":"335","town":"大溪鎮"}],[{"zip":"336","town":"復興鄉"}],[{"zip":"337","town":"大園鄉"}],[{"zip":"338","town":"蘆竹鄉"}]],"新竹市":[[{"zip":"300","town":"東區"}],[{"zip":"300","town":"北區"}],[{"zip":"300","town":"香山區"}]],"新竹縣":[[{"zip":"302","town":"竹北市"}],[{"zip":"303","town":"湖口鄉"}],[{"zip":"304","town":"新豐鄉"}],[{"zip":"305","town":"新埔鎮"}],[{"zip":"306","town":"關西鎮"}],[{"zip":"307","town":"芎林鄉"}],[{"zip":"308","town":"寶山鄉"}],[{"zip":"310","town":"竹東鎮"}],[{"zip":"311","town":"五峰鄉"}],[{"zip":"312","town":"橫山鄉"}],[{"zip":"313","town":"尖石鄉"}],[{"zip":"314","town":"北埔鄉"}],[{"zip":"315","town":"峨眉鄉"}]],"苗栗縣":[[{"zip":"350","town":"竹南鎮"}],[{"zip":"351","town":"頭份鎮"}],[{"zip":"352","town":"三灣鄉"}],[{"zip":"353","town":"南庄鄉"}],[{"zip":"354","town":"獅潭鄉"}],[{"zip":"356","town":"後龍鎮"}],[{"zip":"357","town":"通霄鎮"}],[{"zip":"358","town":"苑裡鎮"}],[{"zip":"360","town":"苗栗市"}],[{"zip":"361","town":"造橋鄉"}],[{"zip":"362","town":"頭屋鄉"}],[{"zip":"363","town":"公館鄉"}],[{"zip":"364","town":"大湖鄉"}],[{"zip":"365","town":"泰安鄉"}],[{"zip":"366","town":"銅鑼鄉"}],[{"zip":"367","town":"三義鄉"}],[{"zip":"368","town":"西湖鄉"}],[{"zip":"369","town":"卓蘭鎮"}]],"台中市":[[{"zip":"400","town":"中區"}],[{"zip":"401","town":"東區"}],[{"zip":"402","town":"南區"}],[{"zip":"403","town":"西區"}],[{"zip":"404","town":"北區"}],[{"zip":"406","town":"北屯區"}],[{"zip":"407","town":"西屯區"}],[{"zip":"408","town":"南屯區"}],[{"zip":"411","town":"太平區"}],[{"zip":"412","town":"大里區"}],[{"zip":"413","town":"霧峰區"}],[{"zip":"414","town":"烏日區"}],[{"zip":"420","town":"豐原區"}],[{"zip":"421","town":"后里區"}],[{"zip":"422","town":"石岡區"}],[{"zip":"423","town":"東勢區"}],[{"zip":"424","town":"和平區"}],[{"zip":"426","town":"新社區"}],[{"zip":"427","town":"潭子區"}],[{"zip":"428","town":"大雅區"}],[{"zip":"429","town":"神岡區"}],[{"zip":"432","town":"大肚區"}],[{"zip":"433","town":"沙鹿區"}],[{"zip":"434","town":"龍井區"}],[{"zip":"435","town":"梧棲區"}],[{"zip":"436","town":"清水區"}],[{"zip":"437","town":"大甲區"}],[{"zip":"438","town":"外埔區"}],[{"zip":"439","town":"大安區"}]],"彰化縣":[[{"zip":"500","town":"彰化市"}],[{"zip":"502","town":"芬園鄉"}],[{"zip":"503","town":"花壇鄉"}],[{"zip":"504","town":"秀水鄉"}],[{"zip":"505","town":"鹿港鎮"}],[{"zip":"506","town":"福興鄉"}],[{"zip":"507","town":"線西鄉"}],[{"zip":"508","town":"和美鎮"}],[{"zip":"509","town":"伸港鄉"}],[{"zip":"510","town":"員林鎮"}],[{"zip":"511","town":"社頭鄉"}],[{"zip":"512","town":"永靖鄉"}],[{"zip":"513","town":"埔心鄉"}],[{"zip":"514","town":"溪湖鎮"}],[{"zip":"515","town":"大村鄉"}],[{"zip":"516","town":"埔鹽鄉"}],[{"zip":"520","town":"田中鎮"}],[{"zip":"521","town":"北斗鎮"}],[{"zip":"522","town":"田尾鄉"}],[{"zip":"523","town":"埤頭鄉"}],[{"zip":"524","town":"溪洲鄉"}],[{"zip":"525","town":"竹塘鄉"}],[{"zip":"526","town":"二林鎮"}],[{"zip":"527","town":"大城鄉"}],[{"zip":"528","town":"芳苑鄉"}],[{"zip":"530","town":"二水鄉"}]],"南投縣":[[{"zip":"540","town":"南投市"}],[{"zip":"541","town":"中寮鄉"}],[{"zip":"542","town":"草屯鎮"}],[{"zip":"544","town":"國姓鄉"}],[{"zip":"545","town":"埔里鎮"}],[{"zip":"546","town":"仁愛鄉"}],[{"zip":"551","town":"名間鄉"}],[{"zip":"552","town":"集集鎮"}],[{"zip":"553","town":"水里鄉"}],[{"zip":"555","town":"魚池鄉"}],[{"zip":"556","town":"信義鄉"}],[{"zip":"557","town":"竹山鎮"}],[{"zip":"558","town":"鹿谷鄉"}]],"雲林縣":[[{"zip":"630","town":"斗南鄉"}],[{"zip":"631","town":"大埤鄉"}],[{"zip":"632","town":"虎尾鄉"}],[{"zip":"633","town":"土庫鄉"}],[{"zip":"634","town":"褒忠鄉"}],[{"zip":"635","town":"東勢鄉"}],[{"zip":"636","town":"臺西鄉"}],[{"zip":"637","town":"崙背鄉"}],[{"zip":"638","town":"麥寮鄉"}],[{"zip":"640","town":"斗六市"}],[{"zip":"643","town":"林內鄉"}],[{"zip":"646","town":"古坑鄉"}],[{"zip":"647","town":"莿桐鄉"}],[{"zip":"648","town":"西螺鎮"}],[{"zip":"649","town":"二崙鄉"}],[{"zip":"651","town":"北港鎮"}],[{"zip":"652","town":"水林鄉"}],[{"zip":"653","town":"口湖鄉"}],[{"zip":"654","town":"四湖鄉"}],[{"zip":"655","town":"元長鄉"}]],"嘉義市":[[{"zip":"600","town":"東區"}],[{"zip":"600","town":"西區"}]],"嘉義縣":[[{"zip":"602","town":"番路鄉"}],[{"zip":"603","town":"梅山鄉"}],[{"zip":"604","town":"竹崎鄉"}],[{"zip":"605","town":"阿里山"}],[{"zip":"606","town":"中埔鄉"}],[{"zip":"607","town":"大埔鄉"}],[{"zip":"608","town":"水上鄉"}],[{"zip":"611","town":"鹿草鄉"}],[{"zip":"612","town":"太保市"}],[{"zip":"613","town":"朴子市"}],[{"zip":"614","town":"東石鄉"}],[{"zip":"615","town":"六腳鄉"}],[{"zip":"616","town":"新港鄉"}],[{"zip":"621","town":"民雄鄉"}],[{"zip":"622","town":"大林鎮"}],[{"zip":"623","town":"溪口鄉"}],[{"zip":"624","town":"義竹鄉"}],[{"zip":"625","town":"布袋鎮"}]],"台南市":[[{"zip":"700","town":"中西區"}],[{"zip":"701","town":"東區"}],[{"zip":"702","town":"南區"}],[{"zip":"704","town":"北區"}],[{"zip":"708","town":"安平區"}],[{"zip":"709","town":"安南區"}],[{"zip":"710","town":"永康區"}],[{"zip":"711","town":"歸仁區"}],[{"zip":"712","town":"新化區"}],[{"zip":"713","town":"左區區"}],[{"zip":"714","town":"玉井區"}],[{"zip":"715","town":"楠西區"}],[{"zip":"716","town":"南化區"}],[{"zip":"717","town":"仁德區"}],[{"zip":"718","town":"關廟區"}],[{"zip":"719","town":"龍崎區"}],[{"zip":"720","town":"官田區"}],[{"zip":"721","town":"麻豆區"}],[{"zip":"722","town":"佳里區"}],[{"zip":"723","town":"西港區"}],[{"zip":"724","town":"七股區"}],[{"zip":"725","town":"將軍區"}],[{"zip":"726","town":"學甲區"}],[{"zip":"727","town":"北門區"}],[{"zip":"730","town":"新營區"}],[{"zip":"731","town":"後壁區"}],[{"zip":"732","town":"白河區"}],[{"zip":"733","town":"東山區"}],[{"zip":"734","town":"六甲區"}],[{"zip":"735","town":"下營區"}],[{"zip":"736","town":"柳營區"}],[{"zip":"737","town":"鹽水區"}],[{"zip":"741","town":"善化區"}],[{"zip":"742","town":"大內區"}],[{"zip":"743","town":"山上區"}],[{"zip":"744","town":"新區區"}],[{"zip":"745","town":"安定區"}]],"高雄市":[[{"zip":"800","town":"新興區"}],[{"zip":"801","town":"前金區"}],[{"zip":"802","town":"苓雅區"}],[{"zip":"803","town":"鹽埕區"}],[{"zip":"804","town":"鼓山區"}],[{"zip":"805","town":"旗津區"}],[{"zip":"806","town":"前鎮區"}],[{"zip":"807","town":"三民區"}],[{"zip":"811","town":"楠梓區"}],[{"zip":"812","town":"小港區"}],[{"zip":"813","town":"左營區"}],[{"zip":"814","town":"仁武區"}],[{"zip":"815","town":"大社區"}],[{"zip":"820","town":"岡山區"}],[{"zip":"821","town":"路竹區"}],[{"zip":"822","town":"阿蓮區"}],[{"zip":"823","town":"田寮區"}],[{"zip":"824","town":"燕巢區"}],[{"zip":"825","town":"橋頭區"}],[{"zip":"826","town":"梓官區"}],[{"zip":"827","town":"彌陀區"}],[{"zip":"828","town":"永安區"}],[{"zip":"829","town":"湖內區"}],[{"zip":"830","town":"鳳山區"}],[{"zip":"831","town":"大寮區"}],[{"zip":"832","town":"林園區"}],[{"zip":"833","town":"鳥松區"}],[{"zip":"840","town":"大樹區"}],[{"zip":"842","town":"旗山區"}],[{"zip":"843","town":"美濃區"}],[{"zip":"844","town":"六龜區"}],[{"zip":"845","town":"內門區"}],[{"zip":"846","town":"杉林區"}],[{"zip":"847","town":"甲仙區"}],[{"zip":"848","town":"桃源區"}],[{"zip":"849","town":"三民區"}],[{"zip":"851","town":"茂林區"}],[{"zip":"852","town":"茄萣區"}]],"屏東縣":[[{"zip":"900","town":"屏東市"}],[{"zip":"901","town":"三地門鄉"}],[{"zip":"902","town":"霧臺鄉"}],[{"zip":"903","town":"瑪家鄉"}],[{"zip":"904","town":"九如鄉"}],[{"zip":"905","town":"里港鄉"}],[{"zip":"906","town":"高樹鄉"}],[{"zip":"907","town":"鹽埔鄉"}],[{"zip":"908","town":"長治鄉"}],[{"zip":"909","town":"麟洛鄉"}],[{"zip":"911","town":"竹田鄉"}],[{"zip":"912","town":"內埔鄉"}],[{"zip":"913","town":"萬丹鄉"}],[{"zip":"920","town":"潮州鎮"}],[{"zip":"921","town":"泰武鄉"}],[{"zip":"922","town":"來義鄉"}],[{"zip":"923","town":"萬巒鄉"}],[{"zip":"924","town":"崁頂鄉"}],[{"zip":"925","town":"新埤鄉"}],[{"zip":"926","town":"南州鄉"}],[{"zip":"927","town":"林邊鄉"}],[{"zip":"928","town":"東港鎮"}],[{"zip":"929","town":"琉球鄉"}],[{"zip":"931","town":"佳冬鄉"}],[{"zip":"932","town":"新園鄉"}],[{"zip":"940","town":"枋寮鄉"}],[{"zip":"941","town":"枋山鄉"}],[{"zip":"942","town":"春日鄉"}],[{"zip":"943","town":"獅子鄉"}],[{"zip":"944","town":"車城鄉"}],[{"zip":"945","town":"牡丹鄉"}],[{"zip":"946","town":"恆春鎮"}],[{"zip":"947","town":"滿州鄉"}]],"台東縣":[[{"zip":"950","town":"台東市"}],[{"zip":"951","town":"綠島鄉"}],[{"zip":"952","town":"蘭嶼鄉"}],[{"zip":"953","town":"延平鄉"}],[{"zip":"954","town":"卑南鄉"}],[{"zip":"955","town":"鹿野鄉"}],[{"zip":"956","town":"關山鎮"}],[{"zip":"957","town":"海端鄉"}],[{"zip":"958","town":"池上鄉"}],[{"zip":"959","town":"東河鄉"}],[{"zip":"961","town":"成功鎮"}],[{"zip":"962","town":"長賓鄉"}],[{"zip":"963","town":"太麻里"}],[{"zip":"964","town":"金峰鄉"}],[{"zip":"965","town":"大武鄉"}],[{"zip":"966","town":"達仁鄉"}]],"花蓮縣":[[{"zip":"970","town":"花蓮市"}],[{"zip":"971","town":"新城鄉"}],[{"zip":"972","town":"吉安鄉"}],[{"zip":"974","town":"壽豐鄉"}],[{"zip":"975","town":"鳳林鎮"}],[{"zip":"976","town":"光復鄉"}],[{"zip":"977","town":"豐濱鄉"}],[{"zip":"978","town":"瑞穗鄉"}],[{"zip":"979","town":"萬榮鄉"}],[{"zip":"981","town":"玉里鎮"}],[{"zip":"982","town":"卓溪鄉"}],[{"zip":"983","town":"富里鄉"}]],"宜蘭縣":[[{"zip":"260","town":"宜蘭市"}],[{"zip":"261","town":"頭城鎮"}],[{"zip":"262","town":"礁溪鄉"}],[{"zip":"263","town":"壯圍鄉"}],[{"zip":"264","town":"員山鄉"}],[{"zip":"265","town":"羅東鎮"}],[{"zip":"266","town":"三星鄉"}],[{"zip":"267","town":"大同鄉"}],[{"zip":"268","town":"五結鄉"}],[{"zip":"269","town":"冬山鄉"}],[{"zip":"270","town":"蘇澳鎮"}],[{"zip":"272","town":"南澳鄉"}],[{"zip":"290","town":"釣魚台"}]],"澎湖縣":[[{"zip":"880","town":"馬公市"}],[{"zip":"881","town":"西嶼鄉"}],[{"zip":"882","town":"望安鄉"}],[{"zip":"883","town":"七美鄉"}],[{"zip":"884","town":"白沙鄉"}],[{"zip":"885","town":"湖西鄉"}]],"金門縣":[[{"zip":"890","town":"金沙鎮"}],[{"zip":"891","town":"金湖鎮"}],[{"zip":"892","town":"金寧鄉"}],[{"zip":"893","town":"金城鎮"}],[{"zip":"894","town":"烈嶼鄉"}],[{"zip":"896","town":"烏坵鄉"}]],"連江縣":[[{"zip":"209","town":"南竿鄉"}],[{"zip":"210","town":"北竿鄉"}],[{"zip":"211","town":"莒光鄉"}],[{"zip":"212","town":"東引鄉"}]]};